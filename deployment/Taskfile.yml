# https://taskfile.dev

version: '3'

tasks:
  api-logs:
    ignore_error: true
    cmds:
      - kubectl logs -f deployment/lexbox -c lexbox-api
  api-console:
    interactive: true
    cmds:
      - kubectl exec -it deployment/lexbox -c lexbox-api -- /bin/sh

  ui-logs:
    ignore_error: true
    cmds:
      - kubectl logs -f deployment/ui
  ui-console:
    interactive: true
    cmds:
      - kubectl exec -it deployment/ui -- /bin/sh

  local-api-forward:
    cmds:
      - kubectl port-forward service/lexbox 5158:5158 -n languagedepot --context docker-desktop

  staging-db-forward:
    cmds:
      - kubectl port-forward service/db 5434:5432 -n languagedepot --context dallas-rke


  diff-staging:
    dir: ./staging
    cmds:
      - kubectl diff -k . --context dallas-rke

  print-staging:
    dir: ./staging
    cmds:
      - kubectl kustomize .
  print-production:
    dir: ./production
    cmds:
      - kubectl kustomize .
